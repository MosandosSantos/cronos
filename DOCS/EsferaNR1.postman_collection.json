{
  "info": {
    "_postman_id": "esfera-nr1-collection",
    "name": "Esfera NR1 API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@empresaexemplo.com\",\n  \"password\": \"123456\",\n  \"name\": \"Admin\",\n  \"companyName\": \"Empresa Exemplo\",\n  \"cnpj\": \"00.000.000/0001-00\"\n}"
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "pm.environment.set('accessToken', json.data.tokens.accessToken);",
                  "pm.environment.set('refreshToken', json.data.tokens.refreshToken);",
                  "pm.environment.set('userId', json.data.user.id);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@empresaexemplo.com\",\n  \"password\": \"123456\"\n}"
            }
          }
        },
        {
          "name": "Refresh",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Sites",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/sites"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/sites",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Matriz\",\n  \"address\": \"Endereco\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/sites/{{siteId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Matriz Atualizada\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/sites/{{siteId}}"
          }
        }
      ]
    },
    {
      "name": "Areas",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/areas"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/areas",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Financeiro\",\n  \"siteId\": \"{{siteId}}\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/areas/{{areaId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Financeiro 2\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/areas/{{areaId}}"
          }
        }
      ]
    },
    {
      "name": "Job Roles",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/job-roles"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/job-roles",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Analista Jr.\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/job-roles/{{jobRoleId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Analista Pleno\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/job-roles/{{jobRoleId}}"
          }
        }
      ]
    },
    {
      "name": "Workers",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/workers"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/workers",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Joao da Silva\",\n  \"areaId\": \"{{areaId}}\",\n  \"jobRoleId\": \"{{jobRoleId}}\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/workers/{{workerId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Joao da Silva 2\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/workers/{{workerId}}"
          }
        }
      ]
    },
    {
      "name": "Risks",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/risks"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/risks",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"title\": \"Risco Exemplo\",\n  \"riskType\": \"FISICO\",\n  \"exposureFrequency\": \"Eventual\",\n  \"possibleHarm\": \"Leve\",\n  \"riskGrade\": \"Baixo\",\n  \"severity\": 2\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/risks/{{riskId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"riskGrade\": \"Medio\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/risks/{{riskId}}"
          }
        }
      ]
    },
    {
      "name": "Action Plans",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/action-plans"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/action-plans",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"riskId\": \"{{riskId}}\",\n  \"title\": \"Plano de Acao\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/action-plans/{{actionPlanId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Plano Atualizado\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/action-plans/{{actionPlanId}}"
          }
        }
      ]
    },
    {
      "name": "Action Tasks",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/action-tasks"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/action-tasks",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"actionPlanId\": \"{{actionPlanId}}\",\n  \"title\": \"Tarefa 1\"\n}"
            }
          }
        },
        {
          "name": "Update Status (USER)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/action-tasks/{{actionTaskId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"IN_PROGRESS\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/action-tasks/{{actionTaskId}}"
          }
        }
      ]
    },
    {
      "name": "Evidences",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/evidences"
          }
        },
        {
          "name": "Upload",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/evidences",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "ownerType",
                  "value": "action_task",
                  "type": "text"
                },
                {
                  "key": "ownerId",
                  "value": "{{actionTaskId}}",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file"
                },
                {
                  "key": "note",
                  "value": "foto",
                  "type": "text"
                }
              ]
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/evidences/{{evidenceId}}"
          }
        }
      ]
    },
    {
      "name": "Inspections",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/inspections"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/inspections",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"inspectorUserId\": \"{{userId}}\",\n  \"templateName\": \"Checklist Padrao\",\n  \"status\": \"DONE\",\n  \"performedAt\": \"2026-02-01T12:00:00.000Z\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/inspections/{{inspectionId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"DONE\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/inspections/{{inspectionId}}"
          }
        }
      ]
    },
    {
      "name": "Inspection Items",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/inspection-items?inspectionId={{inspectionId}}"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/inspection-items",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"inspectionId\": \"{{inspectionId}}\",\n  \"question\": \"Equipamento ok?\",\n  \"answer\": \"Sim\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/inspection-items/{{inspectionItemId}}"
          }
        }
      ]
    },
    {
      "name": "Incidents",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/incidents"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/incidents",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"areaId\": \"{{areaId}}\",\n  \"occurredAt\": \"2026-02-01T12:00:00.000Z\",\n  \"cause\": \"Exemplo\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/incidents/{{incidentId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"victimStatus\": \"Ferida\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/incidents/{{incidentId}}"
          }
        }
      ]
    },
    {
      "name": "PCMSO Exams",
      "item": [
        {
          "name": "List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/pcmso-exams"
          }
        },
        {
          "name": "Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/pcmso-exams",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Exame de Sangue\",\n  \"frequency\": \"Mensal\"\n}"
            }
          }
        },
        {
          "name": "Update",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/pcmso-exams/{{pcmsoExamId}}",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"frequency\": \"Semanal\"\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/pcmso-exams/{{pcmsoExamId}}"
          }
        }
      ]
    },
    {
      "name": "Psychosocial",
      "item": [
        {
          "name": "Surveys - List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/surveys"
          }
        },
        {
          "name": "Surveys - Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/surveys",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Campanha 1\",\n  \"status\": \"ACTIVE\"\n}"
            }
          }
        },
        {
          "name": "Questions - List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/questions?surveyId={{surveyId}}"
          }
        },
        {
          "name": "Questions - Create",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/questions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"surveyId\": \"{{surveyId}}\",\n  \"question\": \"Como voce avalia o ambiente?\",\n  \"dimension\": \"Ambiente\",\n  \"sortOrder\": 1\n}"
            }
          }
        },
        {
          "name": "Responses - Create (Anon)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/responses",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"surveyId\": \"{{surveyId}}\",\n  \"answers\": { \"q1\": \"Ok\" }\n}"
            }
          }
        },
        {
          "name": "Responses - List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/psychosocial/responses?surveyId={{surveyId}}"
          }
        }
      ]
    },
    {
      "name": "Dashboards",
      "item": [
        {
          "name": "Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/dashboards/summary"
          }
        }
      ]
    },
    {
      "name": "Exports",
      "item": [
        {
          "name": "Risks CSV",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/exports/risks.csv"
          }
        },
        {
          "name": "Action Tasks CSV",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/exports/action-tasks.csv"
          }
        }
      ]
    },
    {
      "name": "Imports",
      "item": [
        {
          "name": "Preview",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/imports/ppra-pcmso/preview",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file"
                }
              ]
            }
          }
        },
        {
          "name": "Commit",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": "{{baseUrl}}/imports/ppra-pcmso/commit",
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}